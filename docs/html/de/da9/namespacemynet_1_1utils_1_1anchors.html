<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mynet: mynet.utils.anchors Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Mynet
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">Mynet: A deep convolutional neural network to detect cells</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d8/daa/namespacemynet.html">mynet</a></li><li class="navelem"><a class="el" href="../../dd/dda/namespacemynet_1_1utils.html">utils</a></li><li class="navelem"><a class="el" href="../../de/da9/namespacemynet_1_1utils_1_1anchors.html">anchors</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mynet.utils.anchors Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dcd/classmynet_1_1utils_1_1anchors_1_1AnchorParameters.html">AnchorParameters</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7a8b100b38c7a4b0fc77c17c182ea36c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da9/namespacemynet_1_1utils_1_1anchors.html#a7a8b100b38c7a4b0fc77c17c182ea36c">anchor_targets_bbox</a> (anchors, image_group, annotations_group, num_classes, negative_overlap=0.4, positive_overlap=0.5)</td></tr>
<tr class="separator:a7a8b100b38c7a4b0fc77c17c182ea36c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf99b950491f3160106e5b2cb4b9d101"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da9/namespacemynet_1_1utils_1_1anchors.html#adf99b950491f3160106e5b2cb4b9d101">compute_gt_annotations</a> (anchors, annotations, negative_overlap=0.4, positive_overlap=0.5)</td></tr>
<tr class="separator:adf99b950491f3160106e5b2cb4b9d101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c40bfadb69faca06aa721200d85bea5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da9/namespacemynet_1_1utils_1_1anchors.html#a9c40bfadb69faca06aa721200d85bea5">layer_shapes</a> (image_shape, model)</td></tr>
<tr class="separator:a9c40bfadb69faca06aa721200d85bea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09054b13853a7f628cfa24a23bf91fdf"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da9/namespacemynet_1_1utils_1_1anchors.html#a09054b13853a7f628cfa24a23bf91fdf">make_shapes_callback</a> (model)</td></tr>
<tr class="separator:a09054b13853a7f628cfa24a23bf91fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af89c65f85b008b20caf575e2483995f4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da9/namespacemynet_1_1utils_1_1anchors.html#af89c65f85b008b20caf575e2483995f4">guess_shapes</a> (image_shape, pyramid_levels)</td></tr>
<tr class="separator:af89c65f85b008b20caf575e2483995f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0142efa66830da9f7400919417ba1c9e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da9/namespacemynet_1_1utils_1_1anchors.html#a0142efa66830da9f7400919417ba1c9e">anchors_for_shape</a> (image_shape, pyramid_levels=None, anchor_params=None, shapes_callback=None)</td></tr>
<tr class="separator:a0142efa66830da9f7400919417ba1c9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae39b92e4e0b201a8441ff6fc70465366"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da9/namespacemynet_1_1utils_1_1anchors.html#ae39b92e4e0b201a8441ff6fc70465366">shift</a> (shape, stride, anchors)</td></tr>
<tr class="separator:ae39b92e4e0b201a8441ff6fc70465366"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92752df3b70ba0140fbd8ece0173e278"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da9/namespacemynet_1_1utils_1_1anchors.html#a92752df3b70ba0140fbd8ece0173e278">generate_anchors</a> (base_size=16, ratios=None, scales=None)</td></tr>
<tr class="separator:a92752df3b70ba0140fbd8ece0173e278"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cf82f808f3796892971d98a22b33176"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da9/namespacemynet_1_1utils_1_1anchors.html#a3cf82f808f3796892971d98a22b33176">bbox_transform</a> (anchors, gt_boxes, mean=None, std=None)</td></tr>
<tr class="separator:a3cf82f808f3796892971d98a22b33176"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Copyright 2017-2018 Fizyr (https://fizyr.com)

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a7a8b100b38c7a4b0fc77c17c182ea36c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a8b100b38c7a4b0fc77c17c182ea36c">&#9670;&nbsp;</a></span>anchor_targets_bbox()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.utils.anchors.anchor_targets_bbox </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>anchors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image_group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>annotations_group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>num_classes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>negative_overlap</em> = <code>0.4</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>positive_overlap</em> = <code>0.5</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Generate anchor targets for bbox detection.

Args
    anchors: np.array of annotations of shape (N, 4) for (x1, y1, x2, y2).
    image_group: List of BGR images.
    annotations_group: List of annotations (np.array of shape (N, 5) for (x1, y1, x2, y2, label)).
    num_classes: Number of classes to predict.
    mask_shape: If the image is padded with zeros, mask_shape can be used to mark the relevant part of the image.
    negative_overlap: IoU overlap for negative anchors (all anchors with overlap &lt; negative_overlap are negative).
    positive_overlap: IoU overlap or positive anchors (all anchors with overlap &gt; positive_overlap are positive).

Returns
    labels_batch: batch that contains labels &amp; anchor states (np.array of shape (batch_size, N, num_classes + 1),
                  where N is the number of anchors for an image and the last column defines the anchor state (-1 for ignore, 0 for bg, 1 for fg).
    regression_batch: batch that contains bounding-box regression targets for an image &amp; anchor states (np.array of shape (batch_size, N, 4 + 1),
                  where N is the number of anchors for an image, the first 4 columns define regression targets for (x1, y1, x2, y2) and the
                  last column defines anchor states (-1 for ignore, 0 for bg, 1 for fg).
</pre> 
</div>
</div>
<a id="a0142efa66830da9f7400919417ba1c9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0142efa66830da9f7400919417ba1c9e">&#9670;&nbsp;</a></span>anchors_for_shape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.utils.anchors.anchors_for_shape </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image_shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pyramid_levels</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>anchor_params</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shapes_callback</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Generators anchors for a given shape.

Args
    image_shape: The shape of the image.
    pyramid_levels: List of ints representing which pyramids to use (defaults to [3, 4, 5, 6, 7]).
    anchor_params: Struct containing anchor parameters. If None, default values are used.
    shapes_callback: Function to call for getting the shape of the image at different pyramid levels.

Returns
    np.array of shape (N, 4) containing the (x1, y1, x2, y2) coordinates for the anchors.
</pre> 
</div>
</div>
<a id="a3cf82f808f3796892971d98a22b33176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cf82f808f3796892971d98a22b33176">&#9670;&nbsp;</a></span>bbox_transform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.utils.anchors.bbox_transform </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>anchors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>gt_boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mean</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>std</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compute bounding-box regression targets for an image.</pre> 
</div>
</div>
<a id="adf99b950491f3160106e5b2cb4b9d101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf99b950491f3160106e5b2cb4b9d101">&#9670;&nbsp;</a></span>compute_gt_annotations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.utils.anchors.compute_gt_annotations </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>anchors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>annotations</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>negative_overlap</em> = <code>0.4</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>positive_overlap</em> = <code>0.5</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Obtain indices of gt annotations with the greatest overlap.

Args
    anchors: np.array of annotations of shape (N, 4) for (x1, y1, x2, y2).
    annotations: np.array of shape (N, 5) for (x1, y1, x2, y2, label).
    negative_overlap: IoU overlap for negative anchors (all anchors with overlap &lt; negative_overlap are negative).
    positive_overlap: IoU overlap or positive anchors (all anchors with overlap &gt; positive_overlap are positive).

Returns
    positive_indices: indices of positive anchors
    ignore_indices: indices of ignored anchors
    argmax_overlaps_inds: ordered overlaps indices
</pre> 
</div>
</div>
<a id="a92752df3b70ba0140fbd8ece0173e278"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92752df3b70ba0140fbd8ece0173e278">&#9670;&nbsp;</a></span>generate_anchors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.utils.anchors.generate_anchors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>base_size</em> = <code>16</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ratios</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scales</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Generate anchor (reference) windows by enumerating aspect ratios X
scales w.r.t. a reference window.
</pre> 
</div>
</div>
<a id="af89c65f85b008b20caf575e2483995f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af89c65f85b008b20caf575e2483995f4">&#9670;&nbsp;</a></span>guess_shapes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.utils.anchors.guess_shapes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image_shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pyramid_levels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Guess shapes based on pyramid levels.

Args
     image_shape: The shape of the image.
     pyramid_levels: A list of what pyramid levels are used.

Returns
    A list of image shapes at each pyramid level.
</pre> 
</div>
</div>
<a id="a9c40bfadb69faca06aa721200d85bea5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c40bfadb69faca06aa721200d85bea5">&#9670;&nbsp;</a></span>layer_shapes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.utils.anchors.layer_shapes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>image_shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Compute layer shapes given input image shape and the model.

Args
    image_shape: The shape of the image.
    model: The model to use for computing how the image shape is transformed in the pyramid.

Returns
    A dictionary mapping layer names to image shapes.
</pre> 
</div>
</div>
<a id="a09054b13853a7f628cfa24a23bf91fdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09054b13853a7f628cfa24a23bf91fdf">&#9670;&nbsp;</a></span>make_shapes_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.utils.anchors.make_shapes_callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Make a function for getting the shape of the pyramid levels.
</pre> 
</div>
</div>
<a id="ae39b92e4e0b201a8441ff6fc70465366"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae39b92e4e0b201a8441ff6fc70465366">&#9670;&nbsp;</a></span>shift()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.utils.anchors.shift </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>stride</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>anchors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Produce shifted anchors based on shape of the map and stride size.

Args
    shape  : Shape to shift the anchors over.
    stride : Stride to shift the anchors with over the shape.
    anchors: The anchors to apply at each location.
</pre> 
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>

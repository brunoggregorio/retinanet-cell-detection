<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>retinanet-cell-detection: mynet.train Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">retinanet-cell-detection
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">retinanet-cell-detection: RetinaNet for cell detection.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacemynet.html">mynet</a></li><li class="navelem"><a class="el" href="namespacemynet_1_1train.html">train</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mynet.train Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Copyright 2017-2018 Fizyr (<a href="https://fizyr.com">https://fizyr.com</a>)  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:affd1daebb301dd933565fa5ae74f45ea"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemynet_1_1train.html#affd1daebb301dd933565fa5ae74f45ea">makedirs</a> (path)</td></tr>
<tr class="separator:affd1daebb301dd933565fa5ae74f45ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae374c010de4d16cba6b469146fb1993b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemynet_1_1train.html#ae374c010de4d16cba6b469146fb1993b">get_session</a> ()</td></tr>
<tr class="memdesc:ae374c010de4d16cba6b469146fb1993b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a modified tf session which attempts to allocate only as much GPU memory based on runtime allocations.  <a href="#ae374c010de4d16cba6b469146fb1993b">More...</a><br /></td></tr>
<tr class="separator:ae374c010de4d16cba6b469146fb1993b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa96384734bb1856db9e8d4d579ca0f8c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemynet_1_1train.html#aa96384734bb1856db9e8d4d579ca0f8c">model_with_weights</a> (model, weights, skip_mismatch)</td></tr>
<tr class="memdesc:aa96384734bb1856db9e8d4d579ca0f8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load weights for model.  <a href="#aa96384734bb1856db9e8d4d579ca0f8c">More...</a><br /></td></tr>
<tr class="separator:aa96384734bb1856db9e8d4d579ca0f8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48c0c2176f2f17c0a8404ed4036c839e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemynet_1_1train.html#a48c0c2176f2f17c0a8404ed4036c839e">create_models</a> (backbone_retinanet, num_classes, weights, multi_gpu=2, freeze_backbone=False, lr=1e-5, config=None)</td></tr>
<tr class="memdesc:a48c0c2176f2f17c0a8404ed4036c839e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates three models (model, training_model, prediction_model).  <a href="#a48c0c2176f2f17c0a8404ed4036c839e">More...</a><br /></td></tr>
<tr class="separator:a48c0c2176f2f17c0a8404ed4036c839e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4101af27571ab92774990c08b3edebeb"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemynet_1_1train.html#a4101af27571ab92774990c08b3edebeb">create_callbacks</a> (model, training_model, prediction_model, validation_generator, train_size, lr_range, args)</td></tr>
<tr class="memdesc:a4101af27571ab92774990c08b3edebeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the callbacks to use during training.  <a href="#a4101af27571ab92774990c08b3edebeb">More...</a><br /></td></tr>
<tr class="separator:a4101af27571ab92774990c08b3edebeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6f46d373ab2efaee1617961bb2ebda8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemynet_1_1train.html#ab6f46d373ab2efaee1617961bb2ebda8">create_generators</a> (args, preprocess_image)</td></tr>
<tr class="memdesc:ab6f46d373ab2efaee1617961bb2ebda8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create generators for training and validation.  <a href="#ab6f46d373ab2efaee1617961bb2ebda8">More...</a><br /></td></tr>
<tr class="separator:ab6f46d373ab2efaee1617961bb2ebda8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a537d040915d310b396faa663ed76c467"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemynet_1_1train.html#a537d040915d310b396faa663ed76c467">check_args</a> (parsed_args)</td></tr>
<tr class="memdesc:a537d040915d310b396faa663ed76c467"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to check for inherent contradictions within parsed arguments.  <a href="#a537d040915d310b396faa663ed76c467">More...</a><br /></td></tr>
<tr class="separator:a537d040915d310b396faa663ed76c467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eff40f64c26bb5646ef4df886370cf1"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemynet_1_1train.html#a2eff40f64c26bb5646ef4df886370cf1">parse_args</a> (args)</td></tr>
<tr class="memdesc:a2eff40f64c26bb5646ef4df886370cf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse the arguments.  <a href="#a2eff40f64c26bb5646ef4df886370cf1">More...</a><br /></td></tr>
<tr class="separator:a2eff40f64c26bb5646ef4df886370cf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2058c091e510148add2b08e68a75d14"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemynet_1_1train.html#ae2058c091e510148add2b08e68a75d14">main</a> (args=None)</td></tr>
<tr class="separator:ae2058c091e510148add2b08e68a75d14"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Copyright 2017-2018 Fizyr (<a href="https://fizyr.com">https://fizyr.com</a>) </p>
<p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p>Modifications copyright (C) 2019 Bruno Gregorio - BIPG</p>
<p><a href="https://brunoggregorio.github.io">https://brunoggregorio.github.io</a> <br />
<a href="https://www.bipgroup.dc.ufscar.br">https://www.bipgroup.dc.ufscar.br</a> </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a537d040915d310b396faa663ed76c467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a537d040915d310b396faa663ed76c467">&#9670;&nbsp;</a></span>check_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.train.check_args </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>parsed_args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to check for inherent contradictions within parsed arguments. </p>
<p>For example, batch_size &lt; num_gpus Intended to raise errors prior to backend initialisation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parsed_args</td><td>: <a class="el" href="namespacemynet__ssd__dt-aug_1_1train.html#aec06e16f22057d4983ad63c1cc657126">parser.parse_args()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>parsed_args. </dd></dl>

</div>
</div>
<a id="a4101af27571ab92774990c08b3edebeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4101af27571ab92774990c08b3edebeb">&#9670;&nbsp;</a></span>create_callbacks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.train.create_callbacks </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>training_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>prediction_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>validation_generator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>train_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lr_range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates the callbacks to use during training. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>: The base model. </td></tr>
    <tr><td class="paramname">training_model</td><td>: The model that is used for training. </td></tr>
    <tr><td class="paramname">prediction_model</td><td>: The model that should be used for validation. </td></tr>
    <tr><td class="paramname">validation_generator</td><td>: The generator for creating validation data. </td></tr>
    <tr><td class="paramname">train_size</td><td>: Number of trainable images. </td></tr>
    <tr><td class="paramname">lr_range</td><td>: Learning rate range for Cyclical-LR. </td></tr>
    <tr><td class="paramname">args</td><td>: parseargs args object.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of callbacks used for training. </dd></dl>

</div>
</div>
<a id="ab6f46d373ab2efaee1617961bb2ebda8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6f46d373ab2efaee1617961bb2ebda8">&#9670;&nbsp;</a></span>create_generators()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.train.create_generators </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>preprocess_image</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create generators for training and validation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>: Parseargs object containing configuration for generators. </td></tr>
    <tr><td class="paramname">preprocess_image</td><td>: Function that preprocesses an image for the network.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The generators created. </dd></dl>

</div>
</div>
<a id="a48c0c2176f2f17c0a8404ed4036c839e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48c0c2176f2f17c0a8404ed4036c839e">&#9670;&nbsp;</a></span>create_models()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.train.create_models </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>backbone_retinanet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>num_classes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>weights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>multi_gpu</em> = <code>2</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>freeze_backbone</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lr</em> = <code>1e-5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>config</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates three models (model, training_model, prediction_model). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">backbone_retinanet</td><td>: A function to call to create a retinanet model with a given backbone. </td></tr>
    <tr><td class="paramname">num_classes</td><td>: The number of classes to train. </td></tr>
    <tr><td class="paramname">weights</td><td>: The weights to load into the model. </td></tr>
    <tr><td class="paramname">multi_gpu</td><td>: The number of GPUs to use for training. </td></tr>
    <tr><td class="paramname">freeze_backbone</td><td>: If True, disables learning for the backbone. </td></tr>
    <tr><td class="paramname">config</td><td>: Config parameters, None indicates the default configuration.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>model : The base model. This is also the model that is saved in snapshots. training_model : The training model. If multi_gpu=0, this is identical to model. prediction_model : The model wrapped with utility functions to perform object detection (applies regression values and performs NMS). </dd></dl>

</div>
</div>
<a id="ae374c010de4d16cba6b469146fb1993b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae374c010de4d16cba6b469146fb1993b">&#9670;&nbsp;</a></span>get_session()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.train.get_session </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a modified tf session which attempts to allocate only as much GPU memory based on runtime allocations. </p>

</div>
</div>
<a id="ae2058c091e510148add2b08e68a75d14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2058c091e510148add2b08e68a75d14">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.train.main </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em> = <code>None</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="affd1daebb301dd933565fa5ae74f45ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affd1daebb301dd933565fa5ae74f45ea">&#9670;&nbsp;</a></span>makedirs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.train.makedirs </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa96384734bb1856db9e8d4d579ca0f8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa96384734bb1856db9e8d4d579ca0f8c">&#9670;&nbsp;</a></span>model_with_weights()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.train.model_with_weights </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>weights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>skip_mismatch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load weights for model. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td>: The model to load weights for. </td></tr>
    <tr><td class="paramname">weights</td><td>: The weights to load. </td></tr>
    <tr><td class="paramname">skip_mismatch</td><td>: If True, skips layers whose shape of weights doesn't match with the model.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The model with loaded weights. </dd></dl>

</div>
</div>
<a id="a2eff40f64c26bb5646ef4df886370cf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eff40f64c26bb5646ef4df886370cf1">&#9670;&nbsp;</a></span>parse_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def mynet.train.parse_args </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse the arguments. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
